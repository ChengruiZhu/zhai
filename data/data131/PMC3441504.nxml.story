Swarms of insects, schools of fish and flocks of birds display an impressive variety of collective patterns that emerge from local interactions among group members. These puzzling phenomena raise a variety of questions about the behavioral rules that govern the coordination of individuals' motions and the emergence of large-scale patterns. While numerous models have been proposed, there is still a strong need for detailed experimental studies to foster the biological understanding of such collective motion. Here, we use data recorded on fish barred flagtails moving in groups of increasing sizes in a water tank to demonstrate the power of an incremental methodology for building a fish behavior model completely based on interactions with the physical environment and neighboring fish. In contrast to previous works, our model revealed an implicit balancing of neighbors position and orientation on the turning speed of fish, an unexpected transition between shoaling and schooling induced by a change in the swimming speed, and a group-size effect which results in a decrease of social interactions among fish as density increases. An important feature of this model lies in its ability to allow a large palette of adaptive patterns with a great economy of means.