Recent applications of metagenomics have led to a flood of novel studies and a renewed interest in the role of the gut microbiota in human health. We can now envision a time in the near future where analysis of microbiota composition can be used for diagnostics and the rational design of new therapeutics. However, most studies to date are exploratory and heavily data-driven, and therefore lack mechanistic insights on the ecology governing these complex microbial ecosystems. In this study we propose a new model grounded on ecological and physical principles to explain intestinal microbiota dynamics in response to antibiotic treatment. Our model explains a hysteresis effect that results from the social interaction between two microbial groups, antibiotic-tolerant and antibiotic-sensitive bacteria, as well as the recovery allowed by stochastic fluctuations. We use singular value decomposition for the analysis of temporal metagenomic data, which supports the representation of the microbiota according to two main microbial groups. Our framework explains why microbiota composition can be difficult to recover after antibiotic treatment, thus solving a long-standing puzzle in microbiota biology with profound implications for human health. It therefore forms a conceptual bridge between experiments and theoretical works towards a mechanistic understanding of the gut microbiota.