Multicellular organisms control their cells to facilitate higher level function of the whole organism. In tumors, this control is lost and cells are allowed to enhance their fitness by, for example, increased proliferation. Tumor cells continue to change their behavior through accumulating mutations, leading to a complex and highly heterogeneous structure. Several computational studies have investigated the emergent structures of such mutating group of cells and led to the recognition that cellular heterogeneity within tumors is essential to explain the observed morphologies. Most of these studies have considered a limited number of possible cell phenotypes, an isolated tumor cell population, unlimited growth space around the tumor, often with an inexhaustible source of nutrients. Here we introduce a modeling approach that takes into account the limited growth space around the tumor, localized nutrient sources, cellular metabolism, and mutation in a continuous phenotype space. The model reproduces the Warburg effect due to the limited nutrient supply leading to an irreversible switch in cellular metabolism, and, consistently with previous models, exhibits stages of development together with a natural selection for a rapidly growing phenotype. This phenotype locally emerges in stable environments, but when nutrient supply becomes erratic, these show less resilience and are outcompeted by slow growers.